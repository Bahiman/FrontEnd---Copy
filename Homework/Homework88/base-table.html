<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=\, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>
    <style>
        img {
            width: 150px;
            height: 200px;
        }
    </style>
</head>

<body>
    <div class="container">
        <table class="table table-stripped">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Game</th>
                    <th scope="col">Genre</th>
                    <th scope="col">Protagonist</th>
                    <th scope="col">Price</th>
                    <th scope="col">Image</th>
                    <th scope="col">Function</th>
                </tr>
            <tbody>

            </tbody>
            </thead>
        </table>
    </div>

    <a href="index.html" class="btn btn-warning">Home</a>

    <!-- <script>
        function loadData(id) {
            const data_from_base = localStorage.getItem(`mydata-${id}`);
            if (data_from_base != "") {

            }

    </script> -->

    <script>
        function loadData(id) {
            console.log(id);    
            const data_from_base = localStorage.getItem(`mydata-${id}`);

            if (data_from_base != "") {

                let gaming = {
                    game_name: data_from_base.split("---")[0],
                    genre: data_from_base.split("---")[1],
                    protagonist: data_from_base.split("---")[2],
                    price: data_from_base.split("---")[3],
                    image: data_from_base.split("---")[4],
                };

                let number = id;

                inputDataIntoTable(number, gaming);

                console.log(id);

                
            }       
        }

        function inputDataIntoTable(game_id, game_object){
            const tbody = document.getElementsByTagName("tbody")[0];

            const tr  = document.createElement("tr");

            const th_number = document.createElement("tr");
            
            th_number.textContent = ++game_id;

            const td_game_name  = document.createElement("td");

            td_game_name.textContent = game_object.game_name;

            const td_genre = document.createElement("td");

            td_genre.textContent = game_object.genre;

            const td_price = document.createElement("td");

            td_price.textContent =  "$" + game_object.price;

            const td_image = document.createElement("td");

            const image = document.createElement("img");
            
            image.src = game_object.image;  
            image.alt = `Can not load image for ${game_object.game_name}`;

            td_image.appendChild(image);

            const td_function = document.createElement("td");

            const delete_button = document.createElement("button");

            delete_button.textContent = "Delete";

            delete_button.classList.add("btn-danger");

            delete_button.setAttribute ("onclick", `delete_button_function(${game_id})`);

            td_function.appendChild(delete_button);

             const protagonist = document.createElement("td");

             protagonist.textContent = game_object.protagonist;

            tr.appendChild(th_number);

            tr.appendChild(td_game_name);

            tr.appendChild(td_genre);
             tr.appendChild(protagonist);
            tr.appendChild(td_price);
            tr.appendChild(td_image);
            tr.appendChild(td_function);
            tbody.appendChild(tr);
        }
        
        for (let i = 0; i< localStorage.getItem("counter"); i++){
            loadData(i);
        }

        function delete_button_function(id){
            localStorage.setItem("mydata-" +  (id-1), "")
            localStorage.reload(); 
            localStorage.getItem("mydata");
            console.log("What does");
            console.log("Never want the niggas that's in my league");
            
        }

    </script>
</body>

</html>